<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <title>Ù„ÛŒØ³Øª Ú©ØªØ§Ø¨â€ŒÙ‡Ø§</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

    <style>
        /* Ø§Ø³ØªØ§ÛŒÙ„ Ø¬Ø³Øªâ€ŒÙˆØ¬Ùˆ */
        .search-box {
            margin: 15px 0;
            text-align: right;
        }
        .search-box input {
            width: 320px;
            padding: 8px;
            font-size: 14px;
        }
    </style>
</head>
<body>

<div class="page">
    <div class="page-header">
        <h1>ğŸ“š Ù„ÛŒØ³Øª Ú©ØªØ§Ø¨â€ŒÙ‡Ø§</h1>
        <a href="/add_book" class="btn add">â• Ø§ÙØ²ÙˆØ¯Ù† Ú©ØªØ§Ø¨</a>
    </div>

    <!-- Ø¬Ø³Øªâ€ŒÙˆØ¬ÙˆÛŒ Ú©ØªØ§Ø¨ -->
    <div class="search-box">
        <label for="bookSearch">ğŸ” Ø¬Ø³Øªâ€ŒÙˆØ¬Ùˆ: </label>
        <input type="text" id="bookSearch" placeholder="Ù†Ø§Ù… Ú©ØªØ§Ø¨ØŒ Ù…ÙˆØ¶ÙˆØ¹ ÛŒØ§ Ù‚ÙØ³Ù‡...">
    </div>

    <table class="data-table" id="booksTable">
        <thead>
            <tr>
                <th>Ù†Ø§Ù… Ú©ØªØ§Ø¨</th>
                <th>Ù…ÙˆØ¶ÙˆØ¹</th>
                <th>Ù‚ÙØ³Ù‡</th>
                <th>ÙˆØ¶Ø¹ÛŒØª</th>
                <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
            </tr>
        </thead>
        <tbody>
            {% for book in books %}
            <tr>
                <td>{{ book.title }}</td>
                <td>{{ book.subject }}</td>
                <td>{{ book.shelf }}</td>
                <td>
                    {% if book.status == 'Ø¢Ø²Ø§Ø¯' %}
                        ğŸŸ¢ Ø¢Ø²Ø§Ø¯
                    {% else %}
                        ğŸ”´ Ø¯Ø± Ø§Ù…Ø§Ù†Øª
                    {% endif %}
                </td>
                <td>
                    <a href="/edit_book/{{ book.id }}" class="btn edit">ÙˆÛŒØ±Ø§ÛŒØ´</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<script>
    // Ø¬Ø³Øªâ€ŒÙˆØ¬ÙˆÛŒ Ú©ØªØ§Ø¨â€ŒÙ‡Ø§ (Front-End)
    const searchInput = document.getElementById("bookSearch");

    searchInput.addEventListener("keyup", function () {
        const filter = searchInput.value.toLowerCase();
        const rows = document.querySelectorAll("#booksTable tbody tr");

        rows.forEach(row => {
            const title = row.cells[0].textContent.toLowerCase();
            const subject = row.cells[1].textContent.toLowerCase();
            const shelf = row.cells[2].textContent.toLowerCase();

            if (
                title.includes(filter) ||
                subject.includes(filter) ||
                shelf.includes(filter)
            ) {
                row.style.display = "";
            } else {
                row.style.display = "none";
            }
        });
    });
</script>

</body>
</html>
